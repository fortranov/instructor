# Исправление диаграммы на недельные данные

## Проблема
Диаграмма показывала месячные данные, а должна показывать недельные объемы тренировок с подписями в часах.

## Исправления

### 1. ✅ Изменена логика на недельные данные
- Диаграмма теперь отображает недельные объемы вместо месячных
- Каждый столбец представляет одну неделю
- Данные фильтруются и сортируются по неделям

### 2. ✅ Исправлены подписи по вертикали
- Подписи теперь показывают целые часы (например, "10ч", "15ч")
- Максимальное значение рассчитывается как максимальный недельный объем в часах
- Округление вверх до целых часов для лучшего отображения

### 3. ✅ Обновлена структура данных
- Интерфейс `MonthData` заменен на `WeekData`
- Логика группировки изменена с месячной на недельную
- Адаптивность: 8 недель для мобильных, все недели для десктопа

### 4. ✅ Улучшены подписи и отображение
- Названия недель показывают даты (например, "1.1" для 1 января)
- Подписи под столбцами показывают часы (P: 10ч, C: 5ч)
- Детальная таблица показывает диапазон недель

## Технические изменения

### Логика обработки данных:
```javascript
// Фильтрация и сортировка недель
const yearWeeks = data
  .filter(week => new Date(week.week_start).getFullYear() === currentYear)
  .sort((a, b) => new Date(a.week_start).getTime() - new Date(b.week_start).getTime());
```

### Расчет максимального значения:
```javascript
// Максимальный недельный объем в часах
const maxValueHours = Math.max(
  ...weeklyData.map(week => Math.max(week.planned_duration, week.completed_duration)),
  1
);
const maxValue = Math.ceil(maxValueHours / 60); // Округляем вверх до целых часов
```

### Подписи по вертикали:
```javascript
{[1, 0.75, 0.5, 0.25, 0].map((ratio) => (
  <div key={ratio} className="text-right pr-2">
    {Math.round(maxValue * ratio)}ч
  </div>
))}
```

### Высота столбцов:
```javascript
const plannedHeight = maxValue > 0 ? (formatHours(week.planned_duration) / maxValue) * 100 : 0;
const completedHeight = maxValue > 0 ? (formatHours(week.completed_duration) / maxValue) * 100 : 0;
```

## Результат

Теперь диаграмма:
- ✅ Показывает недельные объемы тренировок
- ✅ Максимальное значение = максимальный недельный объем в часах
- ✅ Подписи по вертикали показывают целые часы
- ✅ Каждый столбец представляет одну неделю
- ✅ Адаптивно работает (8 недель на мобильных, все на десктопе)

## Пример отображения

- **Подписи по вертикали**: 0ч, 5ч, 10ч, 15ч, 20ч
- **Названия недель**: 1.1, 8.1, 15.1, 22.1, 29.1...
- **Подписи под столбцами**: P: 10ч, C: 5ч
- **Максимальное значение**: рассчитывается как максимальный недельный объем в часах
